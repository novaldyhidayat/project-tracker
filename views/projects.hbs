{{!< layouts/main}}

<div class="animate-fade-in">
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">Project Management</h2>
        <p class="text-gray-600">Manage and track your team's projects</p>
      </div>
      <div class="flex gap-3">
        <button class="btn btn-secondary" onclick="refreshProjects()">
          <i class="fas fa-sync-alt"></i>
          Refresh
        </button>
        <button class="btn btn-primary" onclick="createNewProject()">
          <i class="fas fa-plus"></i>
          New Project
        </button>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="card">
      <div class="card-content text-center">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-folder-open text-blue-600 text-2xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-1" id="totalProjects">0</h3>
        <p class="text-gray-600">Total Projects</p>
      </div>
    </div>

    <div class="card">
      <div class="card-content text-center">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-check-circle text-green-600 text-2xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-1" id="activeProjects">0</h3>
        <p class="text-gray-600">Active Projects</p>
      </div>
    </div>

    <div class="card">
      <div class="card-content text-center">
        <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-clock text-yellow-600 text-2xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-1" id="pendingProjects">0</h3>
        <p class="text-gray-600">Pending Review</p>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="projectsGrid">
    <div class="card project-card">
      <div class="card-header">
        <div class="flex items-center justify-between">
          <h3 class="card-title">E-commerce Platform</h3>
          <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full">Active</span>
        </div>
      </div>
      <div class="card-content">
        <p class="text-gray-600 text-sm mb-4">Complete e-commerce solution with payment integration</p>

        <div class="space-y-3">
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-500">Progress</span>
            <span class="font-medium">75%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-green-500 h-2 rounded-full" style="width: 75%"></div>
          </div>

          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>Due: Dec 15, 2025</span>
            <span>12 tasks</span>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-ghost btn-sm" onclick="viewProject(1)">
          <i class="fas fa-eye"></i>
          View Details
        </button>
        <button class="btn btn-primary btn-sm" onclick="editProject(1)">
          <i class="fas fa-edit"></i>
          Edit
        </button>
      </div>
    </div>

    <div class="card project-card">
      <div class="card-header">
        <div class="flex items-center justify-between">
          <h3 class="card-title">Mobile App Redesign</h3>
          <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">Planning</span>
        </div>
      </div>
      <div class="card-content">
        <p class="text-gray-600 text-sm mb-4">UI/UX redesign for mobile application</p>

        <div class="space-y-3">
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-500">Progress</span>
            <span class="font-medium">30%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-blue-500 h-2 rounded-full" style="width: 30%"></div>
          </div>

          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>Due: Nov 20, 2025</span>
            <span>8 tasks</span>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-ghost btn-sm" onclick="viewProject(2)">
          <i class="fas fa-eye"></i>
          View Details
        </button>
        <button class="btn btn-primary btn-sm" onclick="editProject(2)">
          <i class="fas fa-edit"></i>
          Edit
        </button>
      </div>
    </div>

    <div class="card project-card">
      <div class="card-header">
        <div class="flex items-center justify-between">
          <h3 class="card-title">API Integration</h3>
          <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full">Review</span>
        </div>
      </div>
      <div class="card-content">
        <p class="text-gray-600 text-sm mb-4">Third-party API integrations and documentation</p>

        <div class="space-y-3">
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-500">Progress</span>
            <span class="font-medium">90%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-yellow-500 h-2 rounded-full" style="width: 90%"></div>
          </div>

          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>Due: Oct 30, 2025</span>
            <span>15 tasks</span>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-ghost btn-sm" onclick="viewProject(3)">
          <i class="fas fa-eye"></i>
          View Details
        </button>
        <button class="btn btn-primary btn-sm" onclick="editProject(3)">
          <i class="fas fa-edit"></i>
          Edit
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  .project-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .project-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
  }

  .project-card .card-footer {
    justify-content: space-between;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  gsap.from('.project-card', {
    y: 30,
    opacity: 0,
    duration: 0.6,
    stagger: 0.1,
    ease: 'power2.out'
  });

  loadProjectData();
});

function loadProjectData() {
  animateNumber('totalProjects', 0, 8, 1000);
  animateNumber('activeProjects', 0, 5, 1000);
  animateNumber('pendingProjects', 0, 3, 1000);
}

function animateNumber(elementId, start, end, duration) {
  const element = document.getElementById(elementId);
  const startTime = Date.now();

  function update() {
    const elapsed = Date.now() - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const current = Math.floor(start + (end - start) * progress);

    element.textContent = current;

    if (progress < 1) {
      requestAnimationFrame(update);
    }
  }

  update();
}

function createNewProject() {
  window.location.href = '/projects/new';
}

function viewProject(projectId) {
  window.location.href = `/projects/${projectId}`;
}

function editProject(projectId) {
  window.location.href = `/projects/${projectId}/edit`;
}

function refreshProjects() {
  const button = event.target.closest('button');
  const icon = button.querySelector('i');
  icon.classList.add('fa-spin');

  setTimeout(() => {
    icon.classList.remove('fa-spin');
    loadProjectData();
    showToast('Projects refreshed!', 'info');
  }, 1000);
}

function showToast(message, type = 'info') {
  const toast = document.createElement('div');
  toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-all duration-300`;
  toast.innerHTML = `
    <div class="flex items-center gap-3">
      <i class="fas fa-${type === 'success' ? 'check-circle text-green-500' : type === 'error' ? 'exclamation-circle text-red-500' : 'info-circle text-blue-500'}"></i>
      <span class="text-white font-medium">${message}</span>
    </div>
  `;

  if (type === 'success') {
    toast.style.background = 'linear-gradient(135deg, #10b981, #059669)';
  } else if (type === 'error') {
    toast.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
  } else {
    toast.style.background = 'linear-gradient(135deg, #3b82f6, #2563eb)';
  }

  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.transform = 'translateX(0)';
  }, 100);

  setTimeout(() => {
    toast.style.transform = 'translateX(100%)';
    setTimeout(() => {
      document.body.removeChild(toast);
    }, 300);
  }, 3000);
}
</script>
